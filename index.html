<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ババ抜き大会管理</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div id="messageArea" style="font-weight:bold; margin:8px;"></div>

  <!-- 通常スキャン用カメラ -->
  <div id="reader" style="width:320px; margin-bottom:10px;"></div>

  <!-- 順位登録用カメラ -->
  <div id="rankingReader" style="display:none; width:320px; margin-bottom:10px;"></div>

  <!-- 座席一覧 -->
  <div id="seatList"></div>

  <!-- 順位登録リスト -->
  <ul id="rankingList" class="draggable-list" style="margin-top:20px;"></ul>

  <!-- 操作ボタン群 -->
  <div style="margin-top:20px;">
    <button id="btnSave">全データ保存</button>
    <button id="btnLoad">サーバーデータ取得</button>
    <button id="btnUndo">Undo</button>
    <button id="btnToggleMode">モード切替</button>
    <button id="btnConfirmRanking">順位確定</button>
  </div>

  <!-- セクション管理 -->
  <div id="scanSection"></div>
  <div id="rankingSection" style="display:none;"></div>

  <!-- QRコードライブラリ -->
  <script
    src="https://cdn.jsdelivr.net/npm/html5-qrcode@2.3.7/html5-qrcode.min.js"
    type="text/javascript"
    onload="loadAppScript()"
    onerror="console.error('❌ html5-qrcode の読み込みに失敗')"
  ></script>

<script>
  function loadAppScript() {
    console.log("✅ html5-qrcode 読み込み完了。続けて app.js を読み込みます...");
    const script = document.createElement('script');
    script.src = './app.js'; // あなたのapp.jsへのパス
    script.onload = () => {
      if (typeof init === 'function') {
        init(); // アプリ初期化
      }
    };
    document.body.appendChild(script);
  }
</script>

</body>
</html>
